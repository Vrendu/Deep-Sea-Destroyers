!function(){"use strict";!function(){function t(t){return e([0,.8],t)}function e(t,e){return[t[0]*e,t[1]*e]}var i=class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pos=t.pos,this.vel=t.vel,this.radius=t.radius,this.game=t.game,this.health=t.health}isCollidedWith(t){var e,i;return e=this.pos,i=t.pos,Math.sqrt(Math.pow(e[0]-i[0],2)+Math.pow(e[1]-i[1],2))<20}collideWith(t){}move(t){const e=t/16.666666666666668,i=this.vel[0]*e,s=this.vel[1]*e;let n=[this.pos[0]+i,this.pos[1]+s];n[0]<=700&&n[0]>=0&&(this.pos=n),this.vel=this.game.wrap(this.pos,this.vel)}};function s(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class n extends i{constructor(t){t.radius=n.RADIUS,super(t),this.userProjectileSheet=new Image,this.userProjectileSheet.src="assets/flame.png",this.enemyProjectileSheet=new Image,this.enemyProjectileSheet.src="assets/flame_glow.png",this.currentFrame=0,this.eachWidth=128,this.eachHeight=128,this.numFrames=16}draw(t){let e=Math.floor(this.currentFrame/4),i=this.currentFrame%4;this.vel[1]<0?t.drawImage(this.userProjectileSheet,128*i,128*e,this.eachWidth,this.eachHeight,this.pos[0],this.pos[1],60,60):t.drawImage(this.enemyProjectileSheet,128*i,128*e,this.eachWidth,this.eachHeight,this.pos[0],this.pos[1],60,60),this.currentFrame=(this.currentFrame+1)%this.numFrames}}s(n,"RADIUS",2),s(n,"SPEED",15);var r=n;function o(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class a extends i{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.radius=a.RADIUS,t.vel=t.vel||e([.8,0],a.SPEED),t.health=50,super(t),this.img=new Image,this.img.src="assets/scout_enemy.png",this.pos=t.pos}draw(t){if(t.drawImage(this.img,this.pos[0]-20,this.pos[1]-10,120,120),0===this.health){let e=new Image;e.src="assets/explosion.png",t.drawImage(e,this.pos[0]-20,this.pos[1]-10,120,120)}}fireProjectile(){const e=t(4),i=new r({pos:this.pos,vel:e,color:"black",game:this.game});this.game.add(i)}collideWith(t){t.vel[1]<0&&(this.health-=1,this.game.remove(t),this.game.points+=10),0===this.health&&this.game.remove(this)}}o(a,"RADIUS",15),o(a,"SPEED",4);var h=a;class l extends i{constructor(t){t.radius=l.RADIUS,t.vel=t.vel||[0,0],t.health=50,super(t),this.img=new Image,this.img.src="assets/ship_1.png"}draw(t){t.drawImage(this.img,this.pos[0]+15,this.pos[1],30,80)}moveShip(t){this.pos[0]+=t[0],this.pos[1]+=t[1]}fireProjectile(){const e=t(-4),i=new r({pos:this.pos,vel:e,color:"black",game:this.game});this.game.add(i)}collideWith(t){t.vel[1]>1&&(this.health-=1,this.game.points-=5,this.game.points<0&&(this.game.points=0),this.game.remove(t)),0==this.health&&this.game.remove(this)}}!function(t,e,i){(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:15,enumerable:!0,configurable:!0,writable:!0}):t[e]=15}(l,"RADIUS");var c=l;function m(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class u{constructor(t){this.enemies=[],this.projectiles=[],this.ships=[],this.points=0,this.addEnemies(),this.gameview=t}draw(t){t.clearRect(0,0,u.DIM_X,u.DIM_Y),this.allObjects().forEach((e=>{e.draw(t),e instanceof h&&(t.font="20px serif",t.fillText(e.health+" HP",e.pos[0]+20,e.pos[1]+32))})),t.font="30px serif",t.textAlign="right",t.fillStyle="white",t.fillText("SCORE: "+this.points,u.DIM_X-50,u.DIM_Y-100),t.fillText("HEALTH: "+this.ships[0].health,u.DIM_X-50,u.DIM_Y-50)}allObjects(){return[].concat(this.ships,this.enemies,this.projectiles)}step(t){this.moveObjects(t),this.fireEnemyProjectiles(),this.checkCollisions(),this.deleteProjectilesOutOfBounds()}deleteProjectilesOutOfBounds(){this.projectiles.forEach((t=>{(t.pos[1]>u.DIM_Y||t.pos[1]<0)&&this.remove(t)}))}fireEnemyProjectiles(){this.enemies.forEach((t=>{t.pos[0]-this.ships[0].pos[0]<2&&t.pos[0]-this.ships[0].pos[0]>-2&&t.fireProjectile()}))}checkCollisions(){const t=this.allObjects();for(let e=0;e<t.length-1;e++)for(let i=e+1;i<t.length;i++){const s=t[e],n=t[i];s.isCollidedWith(n)&&s.collideWith(n)}}moveObjects(t){this.allObjects().forEach((e=>{e.move(t)}))}add(t){if(t instanceof h)this.enemies.push(t);else if(t instanceof r)this.projectiles.push(t);else{if(!(t instanceof c))throw new Error("unknown type of object");this.ships.push(t)}}addEnemies(){let t=0;for(let e=0;e<u.NUM_ENEMIES;e++)t+=1,this.add(new h({game:this,pos:this.generateEnemyPosition(t)}))}addShip(){const t=new c({pos:[300,600],game:this});return this.add(t),t}generateEnemyPosition(t){return 1===t?[60,50]:2===t?[200,110]:[100,160]}wrap(t,e){let i=t[0],s=e[0];return(i>=650||i<=30)&&(s*=-1),[s,e[1]]}remove(t){switch(!0){case t instanceof r:this.projectiles.splice(this.projectiles.indexOf(t),1);break;case t instanceof h:this.enemies.splice(this.enemies.indexOf(t),1);break;case t instanceof c:this.ships.splice(this.ships.indexOf(t),1);break;default:throw new Error("unknown type of object")}(t instanceof c||0===this.enemies.length)&&this.gameOver()}gameOver(){if(!this.over){this.over=!0;const t=document.createElement("button");t.textContent="Restart Game",t.classList="restart-button",t.addEventListener("click",(()=>{document.body.removeChild(t),this.gameview.setUp(!0)})),document.createElement("div"),document.body.appendChild(t)}}}m(u,"BG_COLOR","#2B65EC"),m(u,"DIM_X",700),m(u,"DIM_Y",700),m(u,"NUM_ENEMIES",3);var d=u;class p{constructor(t,e){this.game=new d(this),this.ctx=t,this.ship=this.game.addShip(),this.paused=e,this.setUp(!1)}setUp(t){const e=document.createElement("button");e.textContent="Start!",e.classList.add("start-button"),game.append(e),e.addEventListener("click",(()=>{this.start(),game.removeChild(e)})),t&&(cancelAnimationFrame(this.animation),this.game=new d(this),this.ship=this.game.addShip())}bindKeyHandlers(){const t=this.ship;Object.keys(p.MOVES).forEach((e=>{const i=p.MOVES[e];key(e,(()=>{t.moveShip(i)}))})),key("space",(()=>{t.fireProjectile()}))}start(){this.bindKeyHandlers(),this.lastTime=0;let t=document.getElementById("pause-button");t.textContent="Pause",t.classList="pause-button",t.onclick=()=>{this.paused=!this.paused,"Pause"===t.textContent?t.textContent="Play":t.textContent="Pause"},this.animation=requestAnimationFrame(this.animate.bind(this))}foundNoPauseButtons(){return null===document.getElementById("pause-button")}animate(t){const e=t-this.lastTime;this.paused||(this.game.step(e),this.game.draw(this.ctx)),this.lastTime=t,this.animation=requestAnimationFrame(this.animate.bind(this))}}!function(t,e,i){(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(p,"MOVES",{w:[0,-10],a:[-10,0],s:[0,10],d:[10,0]});var f=p;!function(){const t=document.getElementById("star-canvas"),e=t.getContext("2d"),i=[];t.width=window.innerWidth,t.height=window.innerHeight;for(let e=0;e<100;e++)i.push({x:Math.random()*t.width,y:Math.random()*t.height,size:2*Math.random()+1,speed:5*Math.random()+.1});window.addEventListener("resize",(function(){t.width=window.innerWidth,t.height=window.innerHeight})),function s(){requestAnimationFrame(s),e.clearRect(0,0,t.width,t.height),function(){e.fillStyle="#ffffff";for(let s=0;s<i.length;s++){const n=i[s];e.beginPath(),e.arc(n.x,n.y,n.size,0,2*Math.PI),e.fill(),n.x-=n.speed,n.x<-n.size&&(n.x=t.width+n.size)}}()}()}(),document.addEventListener("DOMContentLoaded",(()=>{!function(){const t=document.getElementById("text-gif"),e=t.getContext("2d");t.height=300,t.width=420;const i=new Image;i.src="assets/textbox.png";let s=0;function n(){e.drawImage(i,594*s,0,594,168,0,0,t.width,t.height),s=(s+1)%108,requestAnimationFrame(n)}i.onload=function(){n()}}(),function(){const t=document.getElementById("vehicle-gif"),e=t.getContext("2d");t.height=250,t.width=400,e.clearRect(0,0,t.width,t.height);const i=new Image;i.src="assets/vehicle-2.png";let s=0;function n(){e.drawImage(i,528*s,0,528,375,0,0,t.width,t.height),s=(s+1)%3,requestAnimationFrame(n)}i.onload=function(){n()}}(),function(){const t=document.getElementById("controls"),e=t.getContext("2d");t.height=300,t.width=300;const i=new Image;i.addEventListener("load",(function(){e.drawImage(i,0,0,970,647,0,0,t.width,t.height)})),i.src="assets/controls.png"}();const t=document.getElementById("game-canvas");t.width=d.DIM_X,t.height=d.DIM_Y;const e=t.getContext("2d");t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.zIndex="1",new f(e)}))}()}();
//# sourceMappingURL=main.js.map